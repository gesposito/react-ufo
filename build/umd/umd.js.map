{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 4e9d4ee7d405b63010a6","webpack:///umd.js","webpack:///external \"react\"","webpack:///./src/module/useFetchCallback.js","webpack:///./src/module/index.js","webpack:///./src/module/useFetchEffect.js","webpack:///./src/module/useSemanticMemo.js","webpack:///./src/module/awaitResource.js","webpack:///./src/module/Suspend.js"],"names":["root","factory","exports","module","define","amd","self","this","__webpack_require__","moduleId","installedModules","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","require","__webpack_exports__","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","args","arguments","err","apply","undefined","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","Symbol","iterator","toString","_arr","_n","_d","_e","_s","_i","next","push","length","Array","isArray","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_1__useSemanticMemo__","useFetchCallback","fetcher","defaultLoading","useState","loading","setLoading","setError","data","setData","callback","useCallback","abortController","getAbortController","abort","errorAbortionOrSuspension","signal","useSemanticMemo","window","AbortController","console","warn","__WEBPACK_IMPORTED_MODULE_1__useFetchCallback__","useFetchEffect","resource","useEffect","useAreDependenciesChanged","deps","prevDepsRef","useRef","current","prev","is","memo","__WEBPACK_IMPORTED_MODULE_0__Suspend__","awaitResource","Suspend"],"mappings":"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","file":"umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"react-ufo\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"react-ufo\"] = factory();\n\telse\n\t\troot[\"react-ufo\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4e9d4ee7d405b63010a6","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"react-ufo\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"react-ufo\"] = factory();\n\telse\n\t\troot[\"react-ufo\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"react\");\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__useSemanticMemo__ = __webpack_require__(5);\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n\n\nvar defaultError = null;\nvar defaultData = null; //todo sometimes I still see the warning of set state on unmounted component\n\nvar useFetchCallback = function useFetchCallback(fetcher) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$defaultLoading = _ref.defaultLoading,\n      defaultLoading = _ref$defaultLoading === void 0 ? false : _ref$defaultLoading;\n\n  var _useState = Object(__WEBPACK_IMPORTED_MODULE_0_react__[\"useState\"])(defaultLoading),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = Object(__WEBPACK_IMPORTED_MODULE_0_react__[\"useState\"])(defaultError),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var _useState5 = Object(__WEBPACK_IMPORTED_MODULE_0_react__[\"useState\"])(defaultData),\n      _useState6 = _slicedToArray(_useState5, 2),\n      data = _useState6[0],\n      setData = _useState6[1]; //todo abortion before fetch?\n  //todo handle `this`\n\n\n  var callback = Object(__WEBPACK_IMPORTED_MODULE_0_react__[\"useCallback\"])(\n  /*#__PURE__*/\n  _asyncToGenerator(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee() {\n    var abortController,\n        data,\n        errorAbortionOrSuspension,\n        _len,\n        args,\n        _key,\n        name,\n        _args = arguments;\n\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            abortController = getAbortController();\n\n            callback.abort = function () {\n              abortController.abort();\n            };\n\n            setLoading(true);\n            setData(defaultData);\n            setError(defaultError);\n            data = defaultData;\n            errorAbortionOrSuspension = false;\n            _context.prev = 7;\n\n            for (_len = _args.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n              args[_key] = _args[_key];\n            }\n\n            _context.next = 11;\n            return fetcher.apply(void 0, args.concat([abortController.signal]));\n\n          case 11:\n            data = _context.sent;\n            _context.next = 19;\n            break;\n\n          case 14:\n            _context.prev = 14;\n            _context.t0 = _context[\"catch\"](7);\n            name = _context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.name;\n\n            if (name !== 'AbortError' && name !== 'Suspend') {\n              setError(_context.t0);\n              setLoading(false);\n            }\n\n            errorAbortionOrSuspension = true;\n\n          case 19:\n            if (!errorAbortionOrSuspension) {\n              setData(data);\n              setLoading(false);\n            }\n\n          case 20:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[7, 14]]);\n  })), [fetcher]);\n  return Object(__WEBPACK_IMPORTED_MODULE_1__useSemanticMemo__[\"a\" /* default */])(function () {\n    return [loading, error, data, callback];\n  }, [loading, error, data, callback]);\n};\n/*\nconst isThenable = (thenable) => {\n  if (!thenable?.then) {\n    throw \"react-ufo: your function needs to return a promise, did you forget to add a return statement?\"\n  }\n}\n*/\n\n\nvar getAbortController = function getAbortController() {\n  var abortController;\n\n  if (window.AbortController) {\n    abortController = new window.AbortController();\n  } else {\n    // eslint-disable-next-line no-console\n    abortController = {\n      abort: function abort() {\n        return console.warn('react-ufo: you invocation of `.abort()` will do nothing because no `window.AbortController` was detected in your environment');\n      }\n    };\n  }\n\n  return abortController;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (useFetchCallback);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(3);\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__useFetchEffect__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__useFetchCallback__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__awaitResource__ = __webpack_require__(6);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"useFetchEffect\", function() { return __WEBPACK_IMPORTED_MODULE_0__useFetchEffect__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"useFetchCallback\", function() { return __WEBPACK_IMPORTED_MODULE_1__useFetchCallback__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"awaitResource\", function() { return __WEBPACK_IMPORTED_MODULE_2__awaitResource__[\"a\"]; });\n\n\n\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__useFetchCallback__ = __webpack_require__(1);\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n\n\n\nvar useFetchEffect = function useFetchEffect(fn) {\n  var resource = Object(__WEBPACK_IMPORTED_MODULE_1__useFetchCallback__[\"a\" /* default */])(fn, {\n    defaultLoading: true\n  });\n\n  var _resource = _slicedToArray(resource, 4),\n      callback = _resource[3];\n\n  Object(__WEBPACK_IMPORTED_MODULE_0_react__[\"useEffect\"])(function () {\n    callback();\n    return function () {\n      callback.abort();\n    };\n  }, [callback]);\n  return resource;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (useFetchEffect);\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n //todo refactor a bit (prevDepsRef.current = deps in many places is error prone)\n\nvar useAreDependenciesChanged = function useAreDependenciesChanged(deps) {\n  var prevDepsRef = Object(__WEBPACK_IMPORTED_MODULE_0_react__[\"useRef\"])(null);\n\n  if (prevDepsRef.current === null) {\n    prevDepsRef.current = deps;\n    return true;\n  } //todo if args length changes?\n\n\n  for (var i = 0; i < deps.length; i++) {\n    var prev = prevDepsRef.current[i];\n    var current = deps[i];\n\n    if (!Object.is(prev, current)) {\n      prevDepsRef.current = deps;\n      return true;\n    }\n  }\n\n  prevDepsRef.current = deps;\n  return false;\n}; //todo can I implement the same with useEffect but executing on first render and skipping the mount?\n\n\nvar useSemanticMemo = function useSemanticMemo(fn) {\n  var deps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var memo = Object(__WEBPACK_IMPORTED_MODULE_0_react__[\"useRef\"])();\n\n  if (useAreDependenciesChanged(deps)) {\n    memo.current = fn();\n  }\n\n  return memo.current;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (useSemanticMemo);\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Suspend__ = __webpack_require__(7);\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n\n\nvar awaitResource = function awaitResource(_ref) {\n  var _ref2 = _slicedToArray(_ref, 3),\n      loading = _ref2[0],\n      error = _ref2[1],\n      data = _ref2[2];\n\n  if (loading || error) {\n    throw __WEBPACK_IMPORTED_MODULE_0__Suspend__[\"a\" /* default */];\n  }\n\n  return data;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (awaitResource);\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar Suspend = {\n  name: \"Suspend\"\n};\n/* harmony default export */ __webpack_exports__[\"a\"] = (Suspend);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// umd.js","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 0\n// module chunks = 0","import {useState, useCallback} from 'react'\nimport useSemanticMemo from \"./useSemanticMemo\"\n\nconst defaultError = null\nconst defaultData = null\n\n//todo sometimes I still see the warning of set state on unmounted component\nconst useFetchCallback = (fetcher, {defaultLoading = false} = {}) => {\n\n  const [loading, setLoading] = useState(defaultLoading)\n  const [error, setError] = useState(defaultError)\n  const [data, setData] = useState(defaultData)\n\n  //todo abortion before fetch?\n  //todo handle `this`\n  const callback = useCallback(async (...args) => {\n    const abortController = getAbortController()\n    callback.abort = () => {\n      abortController.abort()\n    }\n    setLoading(true)\n    setData(defaultData)\n    setError(defaultError)\n    let data = defaultData\n    let errorAbortionOrSuspension = false\n    try {\n      data = await fetcher(...args, abortController.signal)\n    } catch (error) {\n      const name = error?.name\n      if (name !== 'AbortError' && name !== 'Suspend') {\n        setError(error)\n        setLoading(false)\n      }\n      errorAbortionOrSuspension = true\n    }\n    if (!errorAbortionOrSuspension) {\n      setData(data)\n      setLoading(false)\n    }\n  }, [fetcher])\n\n  return useSemanticMemo(() => [loading, error, data, callback], [loading, error, data, callback])\n\n}\n\n/*\nconst isThenable = (thenable) => {\n  if (!thenable?.then) {\n    throw \"react-ufo: your function needs to return a promise, did you forget to add a return statement?\"\n  }\n}\n*/\n\nconst getAbortController = () => {\n  let abortController\n  if (window.AbortController) {\n    abortController = new window.AbortController()\n  } else {\n    // eslint-disable-next-line no-console\n    abortController = {abort: () => console.warn('react-ufo: you invocation of `.abort()` will do nothing because no `window.AbortController` was detected in your environment')}\n  }\n  return abortController\n}\n\nexport default useFetchCallback\n\n\n// WEBPACK FOOTER //\n// ./src/module/useFetchCallback.js","import useFetchEffect from \"./useFetchEffect\"\nimport useFetchCallback from \"./useFetchCallback\"\nimport awaitResource from \"./awaitResource\"\n\nexport {useFetchEffect, useFetchCallback, awaitResource}\n\n\n// WEBPACK FOOTER //\n// ./src/module/index.js","import {useEffect} from 'react'\nimport useFetchCallback from \"./useFetchCallback\"\n\nconst useFetchEffect = (fn) => {\n\n  const resource = useFetchCallback(fn, {defaultLoading: true})\n\n  const [, , , callback] = resource\n\n  useEffect(() => {\n    callback()\n    return () => {\n      callback.abort()\n    }\n  }, [callback])\n\n  return resource\n\n}\n\n\nexport default useFetchEffect\n\n\n// WEBPACK FOOTER //\n// ./src/module/useFetchEffect.js","import {useRef} from 'react'\n\n//todo refactor a bit (prevDepsRef.current = deps in many places is error prone)\nconst useAreDependenciesChanged = (deps) => {\n\n  const prevDepsRef = useRef(null)\n\n  if (prevDepsRef.current === null) {\n    prevDepsRef.current = deps\n    return true\n  }\n\n  //todo if args length changes?\n  for (let i = 0; i < deps.length; i++) {\n    const prev = prevDepsRef.current[i]\n    const current = deps[i]\n    if (!Object.is(prev, current)) {\n      prevDepsRef.current = deps\n      return true\n    }\n  }\n\n  prevDepsRef.current = deps\n\n  return false\n\n}\n\n//todo can I implement the same with useEffect but executing on first render and skipping the mount?\nconst useSemanticMemo = (fn, deps = []) => {\n  const memo = useRef()\n  if (useAreDependenciesChanged(deps)) {\n    memo.current = fn()\n  }\n  return memo.current\n}\n\nexport default useSemanticMemo\n\n\n// WEBPACK FOOTER //\n// ./src/module/useSemanticMemo.js","import Suspend from \"./Suspend\"\n\nconst awaitResource = ([loading, error, data]) => {\n  if (loading || error) {\n    throw Suspend\n  }\n  return data\n}\n\nexport default awaitResource\n\n\n// WEBPACK FOOTER //\n// ./src/module/awaitResource.js","const Suspend = {\n  name: \"Suspend\"\n}\n\nexport default Suspend\n\n\n// WEBPACK FOOTER //\n// ./src/module/Suspend.js"],"sourceRoot":""}